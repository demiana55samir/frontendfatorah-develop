<!-- ui_fix -->
<div class="invoice-details-container p-0 ps-5 pe-5 position-relative" *ngIf="invoice">
  <div class="row mt-3 w-100">
    <div class="col-md-9 flex-fill">
      <!-- ui_fix -->
      <div  class="col-md-12 title pb-3 ps-2">
        <h2>{{'ADDINVOICE.DISPLAYINVOICEDETAILS' | translate}}</h2>
      </div>
    </div>
    <div class="col-md-12 card invoice-details">
      <div class="row w-100 m-auto">
        <div class="col-md-12 d-flex justify-content-between pb-3 title">
            <h4 *ngIf="invoice?.number">  {{'ADDINVOICE.INVOICEDETAILS' | translate}} {{invoice.number}} #</h4>
        </div>
      </div>
      <div class="row w-100 m-auto">
        <div class="col-md-12 d-flex mt-3 justify-content-between">
          <!-- [btnType]="'main'" -->
          <app-button-comp  [btnType]="'main'"  class="me-3 addBottons" [name]="invoice.title" [color]="'#5C60F5'"></app-button-comp>
          <!-- [btnType]="'main'" -->
          <app-button-comp [btnType]="'main'"  (click)="downloadSimplePdf()" class="me-3 addBottons" [name]="'ADDINVOICE.DOWNLOADSIPLEFIED'|translate" [background_color]="'#5C60F5'" ></app-button-comp>

        </div> 
      </div>
      <div class="row w-100 m-auto mt-4 pb-4 gap-6 border-bottom border-2">
         <div class="col-md-5">
            <div class="card infoCard p-3">
              <div class="d-flex flex-wrap">
                <p>{{'COMMON.ADDRESS'|translate}} :</p>
                <p>{{invoice.address}}</p>
              </div>
              <div class="d-flex flex-wrap">
                <p> {{'COMMON.TELEPHONE'|translate}} : </p>
                <p>{{invoice.telephone}}</p>
              </div>
              <div class="d-flex flex-wrap">
                <p> {{'COMMON.FAXNUMBER'|translate}} : </p>
                <p>98764123245</p>
              </div>
              <div class="d-flex flex-wrap">
                <p>  {{'COMMON.TAXIDENTNUMBER'|translate}} : </p>
                <p>{{invoice.tax_number}}</p>
              </div>
            </div>
         </div>
         <div  class="col-md-6 d-flex align-items-center justify-content-end sm-center">
           <div class="d-flex justify-content-end">
             <div class="d-flex flex-column">
              <!-- <p> {{'COMMON.LOGO'|translate}} </p> -->
              <div class="d-flex flex-wrap align-items-center justify-content-center gap-6">
                <img *ngIf="currentCompanyLogo" [src]="currentCompanyLogo" style="object-fit: cover;border: 1px solid rgba(186, 182, 182, 0.962);width: 178px;height: 136px; border-radius: 20px; " alt="">
                <!-- <img *ngIf="companyLogo" [src]="companyLogo" style="object-fit: cover;width: 178px;height: 136px; border-radius: 20px; " alt=""> -->
                <!-- <input type="file"  hidden #fileInput accept=".png, .jpg, .jpeg"  id="fileInput" (change)="validateImage($event)" style="display: none;"> -->
                <!-- <app-button-comp *ngIf="viewType=='view'" [btnType]="'main'" [name]="'COMMON.ADDLOGO'|translate"  (click)="fileInput.click()" image="./assets/logo/Group30.svg" background_color="#1B1464" ></app-button-comp> -->
               </div>
             </div>
           </div>
         </div>
      </div>
      <div class="row w-100 m-auto mt-4 pb-4 border-bottom border-2">
        <div class="col-md-12">
          <p>{{'COMMON.TO'|translate}}</p>
        </div>
        <div class="col-md-5">
          <div class="card infoCard p-3">
            <div class="d-flex">
              <p>{{'COMMON.CLIENTORCOMPANY'|translate}} : </p>
              <p>{{invoice.client}}</p>
            </div>
            <div class="d-flex">
              <p>{{'COMMON.TAXIDENTNUMBER'|translate}} : </p>
              <p>{{invoice.client_tax_number}}</p>
            </div>
            <div class="d-flex">
               <p>{{'COMMON.ADDRESS'|translate}} :</p>              
               <p>{{invoice.client_address}}</p>
              </div>
            <div class="d-flex">
               <p>{{'COMMON.ISSUEDATE'|translate}}:</p>             
               <p>{{invoice.date |date: "MM-dd-yyyy"}}</p>
            </div>
            <div class="d-flex">
               <p>{{'COMMON.INVOICEDUE'|translate}} :</p>             
               <p>{{invoice.invoice_due |date: "MM-dd-yyyy"}}</p>
            </div>
          </div>
        </div>
      </div>

    <!--  for wide Screen -->
      <!-- ui_fix -->
    <div class="me-4 mt-4 wideScreen d-flex align-items-center  border-2 gap-2 flex-wrap ">
      <div class="flex-fill ps-5  ">
       <p>{{'COMMON.PRODUCTS'|translate}} </p>
      </div>
      <div class=" pe-4">
        <p>{{'COMMON.QUANTITY'|translate}} </p>
       </div>
      <div class=" ps-5 width-16">
       <p>{{'COMMON.PRICE'|translate}} </p>
      </div>
      <div class=" pe-3">
       <p>{{'COMMON.DISCOUNT'|translate}} </p>
     </div>
      <div class=" pe-4 ps-4">
       <p>{{'COMMON.TAXABLEAMOUNT'|translate}} </p>
       </div>
      <div class="ps-4 pe-5"> 
       <p> {{'COMMON.TAX'|translate}} </p></div>
      <div class=" ps-3 pe-4">
       <p>{{'COMMON.TOTAL'|translate}}   </p>
      </div>
     </div>

     <!-- labels inside white box for small Screen -->
     <div *ngFor="let product of invoice.products">
       <div class="me-4 mt-2 w-100 bg-white shadowCard d-flex align-items-center  border-2 gap-2 mb-5 flex-wrap">
         <div class="flex-fill">
         <p class="smallScreen">{{'COMMON.PRODUCTS'|translate}}</p>
         <div class="card displayCard ">
             {{product?.name}}
         </div>
         </div>
         <div class="width-12">
         <p class="smallScreen">{{'COMMON.QUANTITY'|translate}}</p>
         <div class="card displayCard">
          {{product?.quantity}}
         </div>
         </div>
         <div class="width-12">
         <p class="smallScreen">{{'COMMON.PRICE'|translate}}</p>
         <div class="card displayCard">
             {{product?.price}}
         </div>
         </div>
         <div class="width-12">
         <p class="smallScreen">{{'COMMON.DISCOUNT'|translate}}</p>
         <div class="card displayCard">
          {{product?.discount}}
         </div>
       </div>
         <div class="width-12">
         <p class="smallScreen">{{'COMMON.TAXABLEAMOUNT'|translate}}</p>
           <div class="card displayCard">
              {{(product.price*product.quantity)-product.discount}} 
           </div>
         </div>
         <div class="width-12"> 
           <p class="smallScreen"> {{'COMMON.TAX'|translate}}  </p>
           <div class="card displayCard">
            {{product?.tax}}

           </div>
         </div>
         <div class="width-12">
         <p class="smallScreen">{{'COMMON.TOTAL'|translate}}   </p>
         <div class="card displayCard">
          {{product?.total}}
         </div>
         </div>
       </div>
  
     </div>

     <div class="mb-5">
      <span>{{'COMMON.NOTES'|translate}}  :</span>
      <span>{{invoice.notes}}</span>
    </div>

<div class="HLine mb-2"></div>
    <div class="row mt-4  cards  gap-5 mt-4 gap-7 pb-4  border-2 d-flex justify-content-around">
      <div style="background-color: #11C387;" class="totalCards card col-md-3 d-flex align-items-center justify-content-center">
         <span class="text">{{'COMMON.TOTALTAXABLEAMOUNT'|translate}} </span><br>
         <span class="num">{{'COMMON.SAR' |translate}} {{ totalWithoutTax}}</span>
      </div>
      <div style="background-color: #5C60F5;" class="totalCards card col-md-3 d-flex align-items-center justify-content-center">
        <span class="text">{{'COMMON.TOTALTAX'|translate}}</span><br>
        <span class="num">{{'COMMON.SAR' |translate}} {{ totalTax}}</span>
      </div>
      <div style="background-color: #4C4C4C;" class="totalCards card col-md-3 d-flex align-items-center justify-content-center">
        <span class="text">{{'COMMON.TOTAL'|translate}}  </span><br>
        <span class="num">{{'COMMON.SAR' |translate}} {{invoice.total}} </span>
      </div>
    </div>
  

    </div>
 </div>

 <button hidden #downloadBtn type="button" (click)="InvoiceTemplate.downloadPDF()">

 </button>
 <!-- <button hidden #getLink type="button" (click)="InvoiceTemplate.generatePdf()">

 </button> -->
 <button hidden #downloadsimpleBtn type="button" (click)="SimpleInvoiceTemplate.downloadPDF()">

 </button>

    <!-- <app-invoice-template #InvoiceTemplate [logoUrl]="logo" [downloadBoolean]="downloadBoo" [tempType]="'AdminInvoice'"  [invoiceColor]="invoiceColor" [InvoiceType]="default_template_id" [invoice]="invoice" > </app-invoice-template>
    <app-invoice-template #SimpleInvoiceTemplate [logoUrl]="logo" [downloadBoolean]="downloadBoo" [tempType]="'AdminInvoice'"  [invoiceColor]="invoiceColor" [InvoiceType]="7" [invoice]="invoice" > </app-invoice-template> -->

 <app-invoice-template #InvoiceTemplate [logoUrl]="logo" [tempType]="'AdminInvoice'"  [invoiceColor]="invoiceColor" [InvoiceType]="default_template_id" [invoice]="invoice" > </app-invoice-template>
    <app-invoice-template #SimpleInvoiceTemplate [logoUrl]="logo" [tempType]="'AdminInvoice'"  [invoiceColor]="invoiceColor" [InvoiceType]="7" [invoice]="invoice" > </app-invoice-template>


</div>





